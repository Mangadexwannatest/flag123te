repeat wait() until game:IsLoaded()
repeat task.wait() until game.Workspace.Lives:FindFirstChild(game.Players.LocalPlayer.Name)
game.Workspace.Lives:WaitForChild(game.Players.LocalPlayer.Name):WaitForChild("Humanoid")
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Second Piece Last Update April/01/2024", "DarkTheme")
local Tab = Window:NewTab("Main")
local OtherTap = Window:NewTab("Other")
local PortalTab = Window:NewTab("Portal")
local SkillTab = Window:NewTab("Skill")
local TeleportTap = Window:NewTab("Teleport")
local Misc = Window:NewTab("Misc")
local Section = Tab:NewSection("Main")
local OtherConfig = OtherTap:NewSection("Other")
local PortalConfig = PortalTab:NewSection("Auto Portal")
local SkillConfig = SkillTab:NewSection("Auto Skill")
local TeleportConfig = TeleportTap:NewSection("Teleport")
local MiscConfig = Misc:NewSection("Misc")
local Weaponlist = {}
local Mouse = game.Players.LocalPlayer:GetMouse()
local X, Y = 0, 0
local BossTable = {"Shank","Monkey King","Bandit Leader","Lieutenant Marine"}


getgenv().savefilename = "Second_Piece_"..game.Players.LocalPlayer.Name..".txt"

function sex()
    -- reads jsonfile
    local jsonData = readfile(savefilename)
    local data = game:GetService("HttpService"):JSONDecode(jsonData)

    -- global values

    getgenv().Weapon = data.Weapon 
    getgenv().MethodSpin = data.MethodSpin
    getgenv().AutoSpinFruits = data.AutoSpinFruits
    getgenv().AutoEquipTool = data.AutoEquipTool
    getgenv().AutoAttack = data.AutoAttack
    getgenv().AutoChest = data.AutoChest
    getgenv().AutoAllBoss = data.AutoAllBoss
    getgenv().AutoSkillZ = data.AutoSkillZ
    getgenv().AutoSkillX = data.AutoSkillX
    getgenv().AutoSkillC = data.AutoSkillC
    getgenv().AutoSkillV = data.AutoSkillV
    getgenv().AutoPortal = data.AutoPortal
    getgenv().AutoBusoHaki = data.AutoBusoHaki
    getgenv().AutoKenHaki = data.AutoKenHaki
    getgenv().AboveTier = data.AboveTier
    getgenv().RejoinWhenError = data.RejoinWhenError
    getgenv().White_Screen = data.White_Screen
    getgenv().Quest = data.Quest
    getgenv().AutoQuest = data.AutoQuest
    getgenv().AutoGem = data.AutoGem

    ---// updates the json file
    function updatejson()

        local xdata = {
            Weapon = getgenv().Weapon,
            MethodSpin = getgenv().MethodSpin,
            AutoEquipTool = getgenv().AutoEquipTool,
            AutoAttack = getgenv().AutoAttack,
            AutoChest = getgenv().AutoChest,
            AutoAllBoss = getgenv().AutoAllBoss,
            AutoSkillZ = getgenv().AutoSkillZ,
            AutoSkillX = getgenv().AutoSkillX,
            AutoSkillC = getgenv().AutoSkillC,
            AutoSkillV = getgenv().AutoSkillV,
            AutoPortal = getgenv().AutoPortal,
            AutoBusoHaki  = getgenv().AutoBusoHaki,
            AutoKenHaki  = getgenv().AutoKenHaki,
            AutoSpinFruits = getgenv().AutoSpinFruits,
            AboveTier = getgenv().AboveTier,
            RejoinWhenError = getgenv().RejoinWhenError,
            White_Screen = getgenv().White_Screen,
            Quest = getgenv().Quest,
            AutoQuest = getgenv().AutoQuest,
            AutoGem = getgenv().AutoGem
        }

        local json = game:GetService("HttpService"):JSONEncode(xdata)
        writefile(savefilename, json)

end


for i,v in pairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
    table.insert(Weaponlist,v.Name)
end

-------Main--------

local WeaponName = Section:NewDropdown("Select Weapons", "Select Weapon to Equip", Weaponlist, function(bool)
    getgenv().Weapon = bool
    updatejson()
end)

Section:NewButton("Refreshes Weapons", nil, function()
    Weaponlist = {}
    for i,v in pairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
    table.insert(Weaponlist,v.Name)
    WeaponName:Refresh(Weaponlist)
       end
  end)

Section:NewToggle("Auto Equip Select Weapon", nil, function(bool)
    getgenv().AutoEquipTool = bool
    updatejson()
end)

Section:NewToggle("Auto Attack", nil, function(bool)
    getgenv().AutoAttack = bool
    updatejson()
end)

Section:NewToggle("Auto Chests", nil, function(bool)
    getgenv().AutoChest = bool
    updatejson()
end)

local QuestTable = {}
------- Other Tab --------
task.spawn(function ()
    pcall(function ()
for i,v in pairs(game.Workspace.Quest:GetDescendants()) do
    if v.Name == "Quest" then
        table.insert(QuestTable,v.Value)
             end
           end
    end)
end)
OtherConfig:NewDropdown("Select Quest", nil, QuestTable, function(bool)
    getgenv().Quest = bool
    updatejson()
end)

OtherConfig:NewToggle("Auto Quest",nil,function (bool)
    getgenv().AutoQuest = bool
    updatejson()
end)

OtherConfig:NewToggle("Auto Farm Gem",nil,function (bool)
    getgenv().AutoGem = bool
    updatejson()
end)

OtherConfig:NewToggle("Auto AllBoss", nil, function(bool)
    getgenv().AutoAllBoss = bool
    updatejson()
end)


------ Portal Tab ------


PortalConfig:NewDropdown("Select Tier", nil, {"1", "2", "3"}, function(bool)
    getgenv().AboveTier = bool
    updatejson()
end)


PortalConfig:NewToggle("Auto Portal", nil, function(bool)
    getgenv().AutoPortal = bool
    updatejson()
end)

PortalConfig:NewLabel("if you select tier 1 it will do every portal.")
PortalConfig:NewLabel("if you select tier 2 it will do uncommon,legendary portal.")
PortalConfig:NewLabel("if you select tier 3 it will do only legendary portal.")

------ Skill Tab ------

SkillConfig:NewToggle("Z", nil, function(bool)
    getgenv().AutoSkillZ = bool
    updatejson()
end)

SkillConfig:NewToggle("X", nil, function(bool)
    getgenv().AutoSkillX = bool
    updatejson()
end)

SkillConfig:NewToggle("C", nil, function(bool)
    getgenv().AutoSkillC = bool
    updatejson()
end)

SkillConfig:NewToggle("V", nil, function(bool)
    getgenv().AutoSkillV = bool
    updatejson()
end)

--------- Teleport Tap -----------
local TeleportList = {}
for i,v in pairs(game.Workspace.Locations:GetChildren()) do
  table.insert(TeleportList,v.Name)
end

TeleportConfig:NewDropdown("Select Locations", nil, TeleportList, function(bool)
  getgenv().TeleportSelect = bool
end)

TeleportConfig:NewButton("Teleport", nil, function()
  game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game.Workspace.Locations[getgenv().TeleportSelect].CFrame
end)

-------Misc--------

MiscConfig:NewDropdown("Select Methods", "Select Method to Spin", {"Gem", "Beli"}, function(bool)
    getgenv().MethodSpin = bool
    updatejson()
end)

MiscConfig:NewToggle("Auto Spin Fruits", nil, function(bool)
    getgenv().AutoSpinFruits = bool
    updatejson()
end)


MiscConfig:NewToggle("Auto Buso Haki", nil, function(bool)
    getgenv().AutoBusoHaki = bool
    updatejson()
end)

MiscConfig:NewToggle("Auto Ken Haki", nil, function(bool)
    getgenv().AutoKenHaki = bool
    updatejson()
end)

MiscConfig:NewToggle("Auto Rejoin When Disconnect", nil, function(bool)
    getgenv().RejoinWhenError = bool
    updatejson()
end)

MiscConfig:NewToggle("Auto White Screen", nil, function(bool)
    getgenv().White_Screen = bool
    updatejson()
end)


MiscConfig:NewKeybind("Hid Gui", nil, Enum.KeyCode.LeftControl, function()
	Library:ToggleUI()
end)

end -- sex() function end

--------------------------------------------------
--------------------------------------------------

if isfile(savefilename) then -- checks if file exist or not
    sex()
else
    local xdata = {
        Weapon = nil,
        MethodSpin = nil,
        AboveTier = nil,
        Quest = nil,
        AutoEquipTool = false,
        AutoAttack = false,
        AutoChest = false,
        AutoAllBoss = false,
        AutoSkillZ = false,
        AutoSkillX = false,
        AutoSkillC = false,
        AutoSkillV = false,
        AutoPortal = false,
        AutoBusoHaki = false,
        AutoKenHaki = false,
        AutoSpinFruits = false,
        RejoinWhenError = false,
        White_Screen = false,
        AutoQuest = false,
        AutoGem = false

    }
    local json = game:GetService("HttpService"):JSONEncode(xdata)
    writefile(savefilename, json)

    sex()
end

function getclosest()
	local MinDistance = math.huge
	   local ClosestObject
	   for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
			if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
			   local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
			   if dist < MinDistance then
				   MinDistance, ClosestObject = dist, v
			   end
		   end
	   end
	   return ClosestObject
end

task.spawn(function ()
	while task.wait() do pcall(function ()
		if getgenv().AutoPortal and game.PlaceId == 15049111150 and not getgenv().InPorTal then
			for i,v in pairs(game.Workspace.World.Portal:GetChildren()) do
				if getgenv().AboveTier == "1" and not getgenv().InPorTal then 
                if v.Name == "1" or v.Name == "2" or v.Name == "3" and not getgenv().InPorTal then
                        getgenv().STOP = true
						game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.CFrame * CFrame.new(0,-8,0)
                        getgenv().EnterNow = true
                    end
                elseif  getgenv().AboveTier == "2" and not getgenv().InPorTal then 
                    if v.Name == "2" or v.Name == "3" and not getgenv().InPorTal then
                        getgenv().STOP = true
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.CFrame * CFrame.new(0,-8,0)
                        getgenv().EnterNow = true
                    end
                elseif getgenv().AboveTier == "3" and not getgenv().InPorTal then 
                    if v.Name == "3" and not getgenv().InPorTal then
                        getgenv().STOP = true
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.CFrame * CFrame.new(0,-8,0)
                        getgenv().EnterNow = true
                        
                    end
					   end
				 end
			  end
		  end) 
	   end
  end)


task.spawn(function ()
    while wait() do pcall(function ()
        if getgenv().AutoPortal and game.PlaceId == 15049111150 then
            for i,v in pairs(game.Workspace.World.Portal:GetDescendants()) do
                if v.Name == "Frame" and v:FindFirstChild(game.Players.LocalPlayer.Name) == nil then
                    local clickThis = v.Parent.Parent.ProximityPrompt
                    if getgenv().EnterNow then
                        fireproximityprompt(clickThis)
                    if v:FindFirstChild(game.Players.LocalPlayer.Name) ~= nil then
                    getgenv().InPorTal = true
                    end
                   end
                end
            end
         end
     end)
    end
end)

task.spawn(function ()
    while wait() do pcall(function ()
        if getgenv().AutoPortal then
            for i,v in pairs(game.Workspace.World.Portal:GetDescendants()) do
                if v.Name == "Frame" and v:FindFirstChild(game.Players.LocalPlayer.Name) == nil then
                    if getgenv().InPorTal then
                        getgenv().InPorTal = false
                    end
                end
            end
        end
    end)
    end
end)

task.spawn(function ()
    while wait() do pcall(function ()
        if not getgenv().AutoPortal and getgenv().STOP and game.PlaceId == 15049111150 then
            getgenv().STOP = false
           end
       end)
    end
end)

task.spawn(function ()
	while task.wait() do pcall(function()
		if getgenv().AutoEquipTool and not game.Players.LocalPlayer.Character:FindFirstChild(getgenv().Weapon) then
			print("Equiping . . .")
			game.Players.LocalPlayer.Character.Humanoid:EquipTool(game:GetService("Players").LocalPlayer.Backpack:FindFirstChild(getgenv().Weapon))
		   end
	   end)
	end
end)

task.spawn(function ()
	while task.wait() do pcall(function()
		if getgenv().AutoAttack then
            for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
                if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
                    local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist < 25 then
                        X, Y = Mouse.X, Mouse.Y + 10
			game:GetService("VirtualInputManager"):SendMouseButtonEvent(X, Y, 0, true, game, 1)
            game:GetService("VirtualInputManager"):SendMouseButtonEvent(X, Y, 0, false, game, 1)
                       end
                   end
               end
            end
	   end)
	end
end)


task.spawn(function ()
    while task.wait() do pcall(function ()
        if getgenv().AutoChest and not getgenv().STOP then
            for i,v in pairs(game.Workspace.Chests:GetDescendants()) do
                if v.Name == "ProximityPrompt" and not getgenv().STOP then
                    fireproximityprompt(v)
                   end
                end            
             end
         end)  
    end 
end)

task.spawn(function ()
    while task.wait() do pcall(function ()
        if getgenv().AutoAllBoss and game.PlaceId == 15049111150 and not getgenv().STOP then
            for i,v in pairs(game.Workspace.Lives:GetChildren()) do
                if string.find(v.Name,"Natsu") or string.find(v.Name,"Tatsumaki") or string.find(v.Name,"Artoria") or string.find(v.Name,"Sukuna") or string.find(v.Name,"Gojo") or string.find(v.Name,"Kashimo") 
                or string.find(v.Name,"Choso") or string.find(v.Name,"Killua") and not getgenv().STOP then
                  if v.Humanoid.Health ~= 0 then
					repeat wait()
                        game.Workspace.Lives:WaitForChild(game.Players.LocalPlayer.Name):WaitForChild("Humanoid")
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0,0,4)
                    getgenv().DontAcceptQuest = true
                    getgenv().StopFarmGem = true
					until v.Humanoid.Health == 0 or v.Humanoid.Health < 0 or getgenv().STOP or not getgenv().AutoAllBoss or game.PlaceId ~= 15049111150
                    getgenv().DontAcceptQuest = false   
                    getgenv().StopFarmGem = false
                    end
                  end
              end
           end
       end)
    end
end)

task.spawn(function ()
    while wait() do pcall(function ()
        for i,v in pairs(game.Workspace.Lives:GetChildren()) do
        if not getgenv().AutoAllBoss and getgenv().DontAcceptQuest then
            getgenv().DontAcceptQuest = false
        elseif not getgenv().AutoAllBoss and getgenv().StopFarmGem then
            getgenv().StopFarmGem = false
           end
        end 
      end) 
    end
end)

task.spawn(function ()
	while task.wait(.5) do pcall(function()
		if getgenv().AutoSkillZ then
            for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
                if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
                    local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist <= 25 then
			game:GetService("VirtualInputManager"):SendKeyEvent(true, "Z", false, nil)
			game:GetService("VirtualInputManager"):SendKeyEvent(false, "Z", false, nil)
                    end
                end
              end
		   end
	   end)
	end
end)

task.spawn(function ()
	while task.wait(.75) do pcall(function()
		if getgenv().AutoSkillX then
            for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
                if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
                    local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist <= 25 then
			game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, nil)
			game:GetService("VirtualInputManager"):SendKeyEvent(false, "X", false, nil)
                    end
                end
            end
		   end
	   end)
	end
end)

task.spawn(function ()
	while task.wait(.55) do pcall(function()
		if getgenv().AutoSkillC then
            for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
                if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
                    local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist <= 25 then
			game:GetService("VirtualInputManager"):SendKeyEvent(true, "C", false, nil)
			game:GetService("VirtualInputManager"):SendKeyEvent(false, "C", false, nil)
                    end
                end
            end
		   end
	   end)
	end
end)

task.spawn(function ()
	while task.wait(.75) do pcall(function()
		if getgenv().AutoSkillV then
            for i,v in pairs(game.Workspace.Lives:GetDescendants()) do
                if v.Name == "HumanoidRootPart" and v.Parent.Name ~= game.Players.LocalPlayer.Name then
                    local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist <= 25 then
			game:GetService("VirtualInputManager"):SendKeyEvent(true, "V", false, nil)
			game:GetService("VirtualInputManager"):SendKeyEvent(false, "V", false, nil)
                    end
                end
            end
		   end
	   end)
	end
end)

task.spawn(function ()
    while task.wait() do pcall(function ()
        if getgenv().AutoPortal and game.PlaceId ~= 15049111150 then
          if getclosest().Parent.Humanoid.Health ~= 0 then
            repeat 
                task.wait()
                game.Workspace.Lives:WaitForChild(game.Players.LocalPlayer.Name):WaitForChild("Humanoid")
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = getclosest().CFrame * CFrame.new(0,0,4)
            until getclosest().Parent.Humanoid.Health == 0 or getclosest().Parent.Humanoid.Health < 0 or not getgenv().AutoPortal
              end
           end
        end)  
    end
end)

task.spawn(function ()
    while wait(2.5) do pcall(function ()
        if getgenv().AutoPortal and game.PlaceId ~= 15049111150 and not getgenv().Started then
            game:GetService("ReplicatedStorage").Remotes.Ready:FireServer()
            repeat wait() until game:IsLoaded()
            wait(.5)
            getgenv().Started = true
        end
    end) 
    end
end)


task.spawn(function ()
    while task.wait() do pcall(function ()
        if getgenv().AutoKenHaki then
            for i,v in pairs(game.Lighting:GetChildren()) do
                if v.Name == "KenHaki" then
                    if v.Enabled == false then
                        repeat
            local args = {[1] = "KenHaki"}game:GetService("ReplicatedStorage").Remotes.SkillHolder:FireServer(unpack(args))
            wait(1.35)    
        until v.Enabled == true
                    end
                end
            end
          end   
       end)   
    end
end)

task.spawn(function ()
    while task.wait() do pcall(function ()
        if getgenv().AutoBusoHaki then
            for i,v in pairs(game.Workspace.Lives[game.Players.LocalPlayer.Name]:GetChildren()) do
                if v.Name == "Right Arm" and v:FindFirstChild("Haki") == nil then 
            local args = {[1] = "BusoHaki"}game:GetService("ReplicatedStorage").Remotes.SkillHolder:FireServer(unpack(args))
            
                end
            end
          end  
      end)   
    end
end)


task.spawn(function ()
    while wait() do pcall(function ()
        if getgenv().AutoSpinFruits and not getgenv().STOP then      
            for i,v in pairs(game.Workspace.Shop:GetDescendants()) do
                if getgenv().AutoSpinFruits and v.Name == "Object" and getgenv().MethodSpin == "Gem" and v.Value == "RandomDemonFruit" and game.PlaceId == 15049111150 and not getgenv().STOP then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Parent.Parent.CFrame * CFrame.new(0,0,0)
                    fireproximityprompt(v.Parent)
                end
            end
        end
    end)
    end
    end)

task.spawn(function ()
while wait() do pcall(function ()
    if getgenv().AutoSpinFruits and not getgenv().STOP then      
        for i,v in pairs(game.Workspace.Shop:GetDescendants()) do
            if getgenv().AutoSpinFruits and v.Name == "Object" and getgenv().MethodSpin == "Beli" and v.Value == "RandomDemonFruitBeli" and game.PlaceId == 15049111150 and not getgenv().STOP then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Parent.Parent.CFrame * CFrame.new(0,0,0)
                fireproximityprompt(v.Parent)
            end
        end
    end
end)
end
end)


task.spawn(function()
    while wait() do
        pcall(function()
            if getgenv().RejoinWhenError then
                for i,v in pairs(game:GetService("CoreGui").RobloxPromptGui:GetDescendants()) do
                 if v.Name == 'ErrorPrompt' then
            game:GetService("TeleportService"):Teleport(15049111150)
                       end
                   end
                end
            end)
        end
    end)

    task.spawn(function()
        while wait() do
            pcall(function()
                if getgenv().White_Screen then
                    game:GetService("RunService"):Set3dRenderingEnabled(false)
                    else
                    game:GetService("RunService"):Set3dRenderingEnabled(true)
                    end
                end)
            end
        end)

        task.spawn(function ()
            pcall(function ()
        local MobileTouchGui = Instance.new("ScreenGui")
        local ImageButton = Instance.new("ImageButton")
        
        MobileTouchGui.Name = "MobileTouchGui"
        MobileTouchGui.Parent = game:WaitForChild("CoreGui")
        MobileTouchGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        
        ImageButton.Parent = MobileTouchGui
        ImageButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        ImageButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
        ImageButton.BorderSizePixel = 0
        ImageButton.Position = UDim2.new(0.032913845, 0, 0.20441176, 0)
        ImageButton.Size = UDim2.new(0.100000001, 0, 0.144117653, 0)
        ImageButton.Image = "http://www.roblox.com/asset/?id=16966662086"
        end)
        end)
        
                    local Button = game.CoreGui:WaitForChild("MobileTouchGui"):WaitForChild("ImageButton")
                    task.spawn(function ()
                        pcall(function ()
                            Button.TouchTap:Connect(function()
                                game:GetService("VirtualInputManager"):SendKeyEvent(true, "LeftControl", false, nil)
                            end)
                        end)
                    end)
                    
                    task.spawn(function ()
                        while wait() do 
                            pcall(function ()
                                if getgenv().AutoQuest and not getgenv().DontAcceptQuest and game.PlaceId == 15049111150 and not getgenv().STOP then
                                    for i,v in pairs(game.Workspace.Quest:GetDescendants()) do
                                        if v.Name == "Quest" and not getgenv().DontAcceptQuest then
                                            if v.Value == getgenv().Quest and getgenv().NoQuest and not getgenv().DontAcceptQuest then
                                                fireproximityprompt(v.Parent)
                                            end
                                        end
                                    end
                                end
                            end)
                        end
                    end)
                    
                    task.spawn(function ()
                        while wait() do
                            pcall(function ()
                                if getgenv().AutoQuest and not getgenv().DontAcceptQuest  and game.PlaceId == 15049111150 and not getgenv().STOP then
                                    for i,v in pairs(game.Players.LocalPlayer:GetChildren()) do 
                                        if v.Name == "PlayerGui" and v:FindFirstChild("QuestUI") == nil then
                                            getgenv().NoQuest = true
                                        elseif v:FindFirstChild("QuestUI") ~= nil then
                                            getgenv().NoQuest = false
                                        end
                                    end
                                end
                            end)
                        end
                    end)
                    
                    task.spawn(function ()
                        while wait() do 
                            pcall(function ()
                                if getgenv().AutoQuest and not getgenv().DontAcceptQuest and game.PlaceId == 15049111150 and not getgenv().STOP  then
                                    for i,v in pairs(game.Workspace.Quest:GetDescendants()) do
                                        if v.Name == "Quest" and not getgenv().DontAcceptQuest then
                                            if v.Value == getgenv().Quest and not getgenv().DontAcceptQuest then
                                                if getgenv().NoQuest and not getgenv().DontAcceptQuest then
                                                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Parent.Parent.CFrame
                                                end
                                            end
                                        end
                                    end
                                end
                            end)
                        end
                    end)
                    
                    task.spawn(function ()
                        while wait() do 
                            pcall(function ()
                                if getgenv().AutoQuest and not getgenv().DontAcceptQuest and game.PlaceId == 15049111150 and not getgenv().STOP then
                                    for i,v in pairs(game.Workspace.Quest:GetDescendants()) do
                                        if v.Name == "Quest" and not getgenv().DontAcceptQuest then
                                            if v.Value == getgenv().Quest and not getgenv().DontAcceptQuest then
                                                if not getgenv().NoQuest and not getgenv().DontAcceptQuest then
                                                    for _,mon in pairs(game.Workspace.Lives:GetChildren()) do
                                                        if string.find(mon.Name,getgenv().Quest) and not getgenv().DontAcceptQuest then
                                                            if mon.Humanoid.Health ~= 0 and not getgenv().NoQuest and not getgenv().DontAcceptQuest then
                                                                repeat wait()
                                                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = mon.HumanoidRootPart.CFrame * CFrame.new(0,0,4)
                                                            until mon.Humanoid.Health == 0 or mon.Humanoid.Health < 0 or not getgenv().AutoQuest or getgenv().NoQuest or getgenv().DontAcceptQuest
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end)
                        end
                    end)

                    task.spawn(function () 
                        while wait() do pcall(function ()
                            if getgenv().AutoGem and not getgenv().StopFarmGem and game.PlaceId == 15049111150 and not getgenv().STOP then
                                for i,v in pairs(game.Workspace.Lives:GetChildren()) do
                                    if string.find(v.Name,BossTable[1]) or string.find(v.Name,BossTable[2]) 
                                    or string.find(v.Name,BossTable[3]) or string.find(v.Name,BossTable[4]) then
                                        if v.Humanoid.Health ~= 0 then
                                            repeat
                                                task.wait()
                                                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0,0,4)
                                                getgenv().DontAcceptQuest = true
                                            until v.Humanoid.Health == 0 or v.Humanoid.Health < 0 or not getgenv().AutoGem or getgenv().StopFarmGem or game.PlaceId ~= 15049111150
                                            getgenv().DontAcceptQuest = false
                                        end
                                    end
                                end
                            end
                          end)
                        end
                    end)
